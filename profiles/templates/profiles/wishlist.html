{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
My Wishlist
{% endblock title %}

{% block page_header %}
    <div class="container header-container">
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="custom-border p-3">
                    <div class="row">
                        {% include 'profiles/components/sidebar.html' %}
                        <div class="col-12 col-lg-10 mt-4 mt-lg-0">
                            <h4 class="text-start fs-3 fw-4">My Wishlist:</h4>
                            <hr>
                            <div class="row mt-3 d-flex justify-content-center">
                                {% if wishlist %}
                                {% for item in wishlist %}
                                <!-- Product Card -->
                                <div class="col-sm-6 col-md-4 col-lg-4 col-xl-3 mb-3">
                                    <div class="product-grid d-flex flex-column align-items-center h-100">
                                        <div class="product-image">
                                            {% if product.image %}
                                            <a href="{% url 'product' item.product.id %}" class="image">
                                                <img src="{{ product.image.url }}" alt="{{ item.product.name}}"class="img-fluid img-top">
                                            </a>
                                            {% else %}
                                            <a href="">
                                                <img class="img-fluid img-top" src="{{ MEDIA_URL }}noimage.png" alt="{{ product.name }}">
                                            </a>
                                            {% endif %}
                
                                            <form class="product-links" method="POST" action="{% url 'wishlist_add' item.product.id %}">
                                                {% csrf_token %}
                                                <button type="submit" name="wishlist" value="submit" aria-label="add to wishlist">
                                                    <i class="fa fa-heart"></i>
                                                </button>
                                                <input type="hidden" name="redirect_url" value="{{ request.get_full_path }}">
                                            </form>

                                            <form action="{% url 'add_to_bag' item.product.id %}" method="POST">
                                                {% csrf_token %}
                                                <input type="submit" class="add_to_bag" value="Add To Bag">
                                            </form>
                                        </div>
                                        <div class="product-content">
                                            <h3 class="title text-truncate">
                                                <a href="#">{{ product.name }}</a>
                                            </h3>
                
                                            <div class="price">â‚¬ {{ product.price }}</div> 
                                        </div>
                                    </div>
                                </div>
                                <!-- End Product Card -->
                                {% endfor %}
                    
                                {% else %}
                                <div class="d-grid gap-2">
                                    <p class="text-center">No items in wishlist</p>
                                    <a href="{% url 'products' %}" class="btn btn-cordovan d-block mx-auto">Browse Shop</a>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock content %}